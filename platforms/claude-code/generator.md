# Claude Code Platform -- Generation Reference

## Generator Source

The CLAUDE.md generation logic lives at `generators/claude-md.md`. That file contains the complete template for composing a CLAUDE.md context file from feature blocks, vocabulary mappings, and personality dimensions.

## What Claude Code Platform Generates

A Claude Code deployment produces:

### 1. CLAUDE.md (Context File)

The primary context file, auto-loaded at every session start. Composed from selected feature blocks (see `platforms/shared/features/`) with domain vocabulary applied. Contains:

- Philosophy and operating principles
- Discovery-first design (tree injection, YAML queries, MOC navigation)
- Note design patterns (titles as claims, composability test, link semantics)
- Processing pipeline or light-processing workflow
- Maintenance and self-evolution guidance
- Session rhythm (orient, work, persist)
- Ethical guardrails

Generated by: `generators/claude-md.md`

### 2. .claude/hooks/ (Bash Scripts)

Hook scripts that run automatically at event boundaries. See `platforms/claude-code/hooks/` for hook template documentation.

- `scripts/session-orient.sh` -- Session start orientation
- `scripts/validate-note.sh` -- Post-write schema validation
- `scripts/session-persist.sh` -- Stop event persistence
- `scripts/auto-commit.sh` -- Async post-write auto-commit

### 3. .claude/settings.json

Claude Code settings file configuring:

- **Hook configuration** -- event → matcher group → handler format (see `platforms/claude-code/hooks/README.md`)
- Allowed tools and permissions
- Project-specific settings

Hook configuration lives in `.claude/settings.json` under the `"hooks"` key, using the nested matcher-group format. The plugin's own hooks (`hooks/hooks.json`) use the same format and are merged automatically by Claude Code when the plugin is enabled.

### 4. .mcp.json (MCP Server Config)

MCP server wiring for semantic search is configured in `.mcp.json`.

For qmd-enabled systems, generate or merge:

```json
{
  "mcpServers": {
    "qmd": {
      "command": "qmd",
      "args": ["mcp"],
      "autoapprove": [
        "mcp__qmd__search",
        "mcp__qmd__vector_search",
        "mcp__qmd__deep_search",
        "mcp__qmd__get",
        "mcp__qmd__multi_get",
        "mcp__qmd__status"
      ]
    }
  }
}
```

Merge additively: preserve existing non-qmd MCP servers and only upsert the qmd block.

### 5. Processing Skills

Processing skills (/reduce, /reflect, /reweave, /verify, /validate) are inherited from the plugin's `skills/` directory -- they are NOT copied to user projects. Skills read `ops/derivation-manifest.md` at runtime for domain vocabulary transformation, so a therapy system's `/surface` resolves to the canonical `/reduce` skill automatically.

Plugin updates to processing methodology reach all users without regeneration. Vocabulary changes via /reseed take effect immediately.

## Platform Characteristics

| Aspect | Detail |
|--------|--------|
| Context loading | CLAUDE.md auto-loaded by Claude Code CLI |
| Hook language | Bash scripts |
| Hook events | SessionStart, PostToolUse, Stop |
| Skill format | .claude/skills/*.md or inherited from plugin skills/ |
| Agent format | .claude/agents/*.md |
| File access | Full filesystem via Claude Code CLI |
| MCP support | Yes -- configured via .mcp.json |
